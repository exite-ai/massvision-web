# Massvision Web UI/UX設計書

## 1. 全体レイアウト

### 1.1 基本レイアウト
```
+------------------+----------------------------------+
|     ヘッダー     |                                  |
+--------+---------+                                  |
|        |         |                                  |
| サイド |  メイン |           キャンバス             |
| バー   |  パネル |                                  |
|        |         |                                  |
|        |         |                                  |
+--------+---------+----------------------------------+
|                 フッター                           |
+----------------------------------------------------+
```

### 1.2 主要コンポーネント
- ヘッダー：ロゴ、ユーザーメニュー、プロジェクト選択
- サイドバー：プロジェクト一覧、シーン一覧
- メインパネル：キャラクタ配置、マクロ編集、アニメーション制御
- キャンバス：マスゲームの視覚化エリア
- フッター：ステータス表示、ヘルプ

## 2. 主要画面設計

### 2.1 プロジェクト一覧画面
```
+----------------------------------------------------+
|  Massvision  | プロジェクト一覧  | ユーザー名 ▼    |
+----------------------------------------------------+
|  + 新規プロジェクト作成                            |
|                                                    |
|  [プロジェクト1]                                   |
|  シーン数: 5 | 最終更新: 2024/03/20                |
|  [編集] [削除] [エクスポート]                      |
|                                                    |
|  [プロジェクト2]                                   |
|  シーン数: 3 | 最終更新: 2024/03/19                |
|  [編集] [削除] [エクスポート]                      |
+----------------------------------------------------+
```

### 2.2 エディタ画面
```
+----------------------------------------------------+
|  Massvision  | プロジェクト名  | シーン: 1/5  | ユーザー名 ▼ |
+--------+-------------------------------------------+
|        | ツールバー                                |
|        | [配置] [マクロ] [アニメ] [設定]           |
|        |                                           |
| サイド | +-----------------------------------+     |
| バー   | |                                   |     |
|        | |           キャンバス              |     |
|        | |                                   |     |
|        | +-----------------------------------+     |
|        |                                           |
|        | プロパティパネル                          |
|        | キャラクタ情報                            |
|        | マクロ設定                                |
+--------+-------------------------------------------+
```

## 3. 主要機能のUI設計

### 3.1 キャラクタ配置機能
```
+------------------------------------------+
| 配置ツール                                |
| [単一配置] [線配置] [円配置] [対称配置]   |
|                                          |
| プロパティ                                |
| 初期方向: [0°] [45°] [90°] ...           |
| マクロ: [選択]                           |
| 変数設定:                                |
| n: [値] m: [値] l: [値] ...              |
+------------------------------------------+
```

### 3.2 マクロ編集機能
```
+------------------------------------------+
| マクロエディタ                            |
| マクロ番号: [1] [2] [3] ...              |
|                                          |
| +----------------------------------+     |
| | f[4] tr90[2] mp[2]              |     |
| +----------------------------------+     |
|                                          |
| 変数設定                                  |
| n: [1] 増分: [1]                         |
| m: [2] 増分: [1]                         |
|                                          |
| [適用] [コピー] [ペースト] [クリア]      |
+------------------------------------------+
```

### 3.3 アニメーション制御
```
+------------------------------------------+
| アニメーションコントロール                |
| [再生] [一時停止] [停止]                  |
|                                          |
| カウント: [1] / [64]                     |
| 速度: [=====o====]                       |
|                                          |
| 表示オプション                            |
| [ ] 軌跡表示                             |
| [ ] 衝突検出                             |
| [ ] グリッド表示                         |
+------------------------------------------+
```

## 4. インタラクション設計

### 4.1 ドラッグ&ドロップ
- キャラクタの配置：キャンバス上でドラッグ&ドロップ
- マクロの適用：マクロをキャラクタにドラッグ&ドロップ
- シーンの並び替え：サイドバーでドラッグ&ドロップ

### 4.2 ショートカットキー
```
Ctrl + N: 新規プロジェクト
Ctrl + S: 保存
Ctrl + Z: 元に戻す
Ctrl + Y: やり直し
Space: アニメーション再生/一時停止
```

### 4.3 コンテキストメニュー
- キャラクタ右クリック：プロパティ編集、マクロ設定
- キャンバス右クリック：配置ツール、表示オプション
- シーン右クリック：複製、削除、エクスポート

## 5. レスポンシブデザイン

### 5.1 ブレークポイント
- デスクトップ: 1200px以上
- タブレット: 768px - 1199px
- モバイル: 767px以下

### 5.2 モバイル対応
- サイドバーを折りたたみ可能に
- ツールバーをコンパクトに
- タッチ操作に最適化

## 6. アクセシビリティ

### 6.1 対応項目
- キーボードナビゲーション
- スクリーンリーダー対応
- ハイコントラストモード
- フォントサイズ調整

### 6.2 カラーパレット
```
プライマリ: #2196F3
セカンダリ: #FFC107
アクセント: #F44336
背景: #FFFFFF
テキスト: #212121
```

## 7. エラー処理

### 7.1 エラー表示
- トースト通知
- インラインエラー
- モーダルダイアログ

### 7.2 フィードバック
- 操作成功時のアニメーション
- ローディングインジケータ
- 進捗バー 